
# Window

本目录

## 窗口绘制流程

1. 创建窗口
2. 解析窗口内容XML并生成Element
3. 加载解析Element
4. 布局元素
5. 渲染元素

## 元素布局

1. 块元素起始位置0,0, 通过painter偏移来完成相关位置控制
2. 内联元素布局更改, 则直接兄弟元素跟着调整,  保证其自身位置正确, 直接绘制

## 如何寻找鼠标事件元素

由于hover效果是针对所有元素, 鼠标移动必然会存在一次元素遍历, 可在此用zindex最高的hover元素做为事件元素, zindex是基于父元素的故将父元素与子元素拼接作为子元素最终的zindex.

## 元素渲染

定位元素的随意性导致元素渲染与鼠标事件捕捉都比价麻烦, 实现此类效果方案有两种: 1 一种广度优先(同级优先级)渲染[[有问题]] 2 所有元素统一按优先渲染(存在元素按优先级提取的过程)

## 示教系统

示教系统是一种带有条件的复盘系统.

事件预处理:  针对元素位置未变, 内容变化的情况,  这是可以在预处理中还原场景
事件触发器重写: 针对元素位置发生改变, 默认的鼠标坐标已无法触发元素事件, 这是需重写触发器, 直接更新鼠标位置为正确位置

## TODO

[x] 鼠标事件
[x] v-model
[x] 元素拖拽
[x] Hover 样式变化  样式联动
[x] UpdateLayout 调用优化
